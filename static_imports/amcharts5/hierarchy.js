"use strict";(self.webpackChunk_am5=self.webpackChunk_am5||[]).push([[3583],{8613:function(e,t,i){i.r(t),i.d(t,{BreadcrumbBar:function(){return f},DefaultTheme:function(){return l},ForceDirected:function(){return ne},Hierarchy:function(){return T},HierarchyLink:function(){return L},HierarchyNode:function(){return _},LinkedHierarchy:function(){return S},LinkedHierarchyNode:function(){return O},Pack:function(){return Ie},Partition:function(){return Re},Sunburst:function(){return je},Tree:function(){return Fe},Treemap:function(){return Ue}});var a=i(3409),n=i(6245),r=i(2754),s=i(3783),o=i(9395);class l extends a.Q{setupDefaultRules(){super.setupDefaultRules();const e=this._root.interfaceColors,t=this._root.gridLayout,i=this.rule.bind(this);i("Hierarchy").setAll({legendLabelText:"{category}",legendValueText:"{sum.formatNumber('#.#')}",width:n.AQ,height:n.AQ,colors:r.U.new(this._root,{step:2}),downDepth:1,initialDepth:5,singleBranchOnly:!0,maskContent:!0,animationEasing:o.out(o.cubic)}),i("HierarchyNode").setAll({toggleKey:"disabled",setStateOnChildren:!0,position:"absolute",isMeasured:!1,cursorOverStyle:"pointer",tooltipText:"{category}: {sum}"}),i("HierarchyNode",["last"]).setAll({cursorOverStyle:"default"});{const t=i("Label",["hierarchy","node"]);t.setAll({centerX:n.CI,centerY:n.CI,position:"absolute",paddingBottom:1,paddingTop:1,paddingRight:4,paddingLeft:4,text:"{category}",populateText:!0,oversizedBehavior:"fit",minScale:.3}),(0,s.v)(t,"fill",e,"alternativeText")}{const t=i("HierarchyLink");t.setAll({isMeasured:!1,position:"absolute",strokeWidth:1,strokeOpacity:1,strength:.9,distance:1.1}),(0,s.v)(t,"stroke",e,"grid")}i("Circle",["linkedhierarchy","shape"]).setAll({position:"absolute",fillOpacity:1,strokeOpacity:0,radius:15,tooltipY:0}),i("Circle",["linkedhierarchy","shape","outer"]).setAll({position:"absolute",opacity:1,fillOpacity:0,strokeDasharray:0,strokeOpacity:1,radius:15,scale:1.1,interactive:!1}),i("Circle",["linkedhierarchy","shape","outer"]).states.create("disabled",{opacity:1,scale:1.1,strokeDasharray:2}),i("Circle",["linkedhierarchy","shape","outer"]).states.create("hoverDisabled",{scale:1.2,opacity:1,strokeDasharray:2}),i("Circle",["linkedhierarchy","shape","outer"]).states.create("hover",{scale:1.05,strokeDasharray:0}),i("Circle",["linkedhierarchy","shape","outer"]).states.create("hidden",{opacity:0,strokeDasharray:0}),i("BreadcrumbBar").setAll({paddingLeft:8,layout:t});{const t=i("Label",["breadcrumb"]);t.setAll({paddingRight:4,paddingLeft:4,cursorOverStyle:"pointer",populateText:!0,text:"{category}:"}),(0,s.v)(t,"fill",e,"primaryButton")}{const t=i("Label",["breadcrumb"]).states.create("hover",{});(0,s.v)(t,"fill",e,"primaryButtonHover")}{const t=i("Label",["breadcrumb"]).states.create("down",{stateAnimationDuration:0});(0,s.v)(t,"fill",e,"primaryButtonDown")}{const t=i("Label",["breadcrumb","last"]);t.setAll({populateText:!0,text:"{category}",fontWeight:"bold",cursorOverStyle:"default"}),(0,s.v)(t,"fill",e,"primaryButton")}{const t=i("RoundedRectangle",["breadcrumb","label","background"]);t.setAll({fillOpacity:0}),(0,s.v)(t,"fill",e,"background")}i("Partition").setAll({downDepth:1,upDepth:0,initialDepth:5}),i("HierarchyNode",["partition"]).setAll({setStateOnChildren:!1}),i("HierarchyNode",["partition"]).states.create("hidden",{opacity:1,visible:!0});{const t=i("Label",["partition","node"]);t.setAll({x:n.CI,y:n.CI,centerY:n.CI,centerX:n.CI,paddingBottom:1,paddingTop:1,paddingLeft:1,paddingRight:1,rotation:90,populateText:!0,text:"{category}",oversizedBehavior:"fit",minScale:.4}),(0,s.v)(t,"fill",e,"alternativeText")}i("Label",["horizontal","partition","node"]).setAll({rotation:0});{const t=i("RoundedRectangle",["partition","node","shape"]);t.setAll({strokeOpacity:1,strokeWidth:1,cornerRadiusBR:0,cornerRadiusTR:0,cornerRadiusBL:0,cornerRadiusTL:0}),(0,s.v)(t,"stroke",e,"background")}i("RoundedRectangle",["partition","node","shape","last"]).setAll({fillOpacity:.75}),i("Sunburst").setAll({singleBranchOnly:!0}),i("HierarchyNode",["sunburst"]).setAll({setStateOnChildren:!1}),i("HierarchyNode",["sunburst"]).states.create("hidden",{opacity:0,visible:!1});{const t=i("Slice",["sunburst","node","shape"]);t.setAll({strokeOpacity:1,strokeWidth:1,cornerRadius:0}),(0,s.v)(t,"stroke",e,"background")}i("Slice",["sunburst","node","shape","last"]).setAll({fillOpacity:.75});{const t=i("RadialLabel",["sunburst","node"]);t.setAll({x:0,y:0,textType:"radial",paddingBottom:1,paddingTop:1,paddingLeft:1,paddingRight:1,centerX:n.CI,populateText:!0,text:"{category}",oversizedBehavior:"fit",minScale:.4,baseRadius:n.CI,rotation:0}),(0,s.v)(t,"fill",e,"alternativeText")}i("ForceDirected").setAll({minRadius:(0,n.aQ)(1),maxRadius:(0,n.aQ)(8),initialFrames:500,centerStrength:.8,manyBodyStrength:-14,velocityDecay:.5,linkWithStrength:.5,showOnFrame:10,singleBranchOnly:!1,upDepth:1/0,downDepth:1,initialDepth:5,topDepth:0}),i("Tree").setAll({orientation:"vertical",paddingLeft:20,paddingRight:20,paddingTop:20,paddingBottom:20,singleBranchOnly:!1,upDepth:1/0,downDepth:1,initialDepth:5,topDepth:0}),i("Pack").setAll({paddingLeft:20,paddingTop:20,paddingBottom:20,paddingRight:20,nodePadding:0});{const t=i("Label",["pack","node"]);t.setAll({centerY:n.CI,centerX:n.CI,paddingBottom:1,paddingTop:1,paddingLeft:1,paddingRight:1,populateText:!0,text:"{category}",oversizedBehavior:"fit",minScale:.4}),(0,s.v)(t,"fill",e,"alternativeText")}{const t=i("Circle",["pack","node","shape"]);t.setAll({strokeOpacity:.5,fillOpacity:.8,strokeWidth:1}),(0,s.v)(t,"stroke",e,"background")}i("LinkedHierarchyNode").setAll({draggable:!0}),i("LinkedHierarchyNode").states.create("hidden",{scale:0,opacity:0,visible:!1}),i("Treemap").setAll({upDepth:0,layoutAlgorithm:"squarify"});{const t=i("Label",["treemap","node"]);t.setAll({x:n.CI,y:n.CI,centerY:n.CI,centerX:n.CI,paddingBottom:1,paddingTop:1,paddingLeft:1,paddingRight:1,populateText:!0,text:"{category}",oversizedBehavior:"fit",minScale:.4}),(0,s.v)(t,"fill",e,"alternativeText")}i("HierarchyNode",["treemap","node"]).setAll({tooltipY:(0,n.aQ)(40),isMeasured:!1,position:"absolute"});{const t=i("RoundedRectangle",["treemap","node","shape"]);t.setAll({strokeOpacity:1,strokeWidth:1,cornerRadiusBR:0,cornerRadiusTR:0,cornerRadiusBL:0,cornerRadiusTL:0,fillOpacity:1}),(0,s.v)(t,"stroke",e,"background")}}}var h=i(8777),c=i(962),u=i(3497),d=i(5769),g=i(7144),p=i(7652);class f extends h.W{constructor(){super(...arguments),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>c._._new(this._root,{themeTags:p.mergeTags(this.labels.template.get("themeTags",[]),["label"]),background:u.c.new(this._root,{themeTags:["background"]})},[this.labels.template])))}),Object.defineProperty(this,"_disposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}makeLabel(e){const t=this.labels.make();return t._setDataItem(e),t.states.create("hover",{}),t.states.create("down",{}),t.events.on("click",(()=>{const t=this.get("series");t&&t.selectDataItem(e)})),this.labels.push(t),t}_afterNew(){this._defaultThemes.push(l.new(this._root)),this._settings.themeTags=p.mergeTags(this._settings.themeTags,["breadcrumb"]),super._afterNew()}_changed(){if(super._changed(),this.isDirty("series")){const e=this.get("series"),t=this._prevSettings.series;e!=t?this._disposer=e.events.on("dataitemselected",(e=>{this._handleDataItem(e.dataItem)})):t&&this._disposer&&this._disposer.dispose(),this._handleDataItem(e.get("selectedDataItem"))}}_handleDataItem(e){if(this.set("minHeight",this.height()),this.children.clear(),this.labels.clear(),e){let t=e;for(;t;){let i=this.makeLabel(t);t==e&&i.addTag("last"),this.children.moveValue(i,0),t=t.get("parent")}}}}Object.defineProperty(f,"className",{enumerable:!0,configurable:!0,writable:!0,value:"BreadcrumbBar"}),Object.defineProperty(f,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.W.classNames.concat([f.className])});var m=i(5125),y=i(3399),v=i(9361);class _ extends h.W{constructor(){super(...arguments),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_clickDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.states.create("disabled",{}),this.states.create("hover",{}),this.states.create("hoverDisabled",{}),this.on("disabled",(()=>{const e=this.dataItem;if(!e.get("children"))return void this.set("disabled",!0);const t=this.get("disabled"),i=this.series;e&&i&&e.get("disabled")!=t&&(t?i.disableDataItem(e):i.enableDataItem(e,i.get("downDepth",1),0))}))}_changed(){super._changed(),this.isDirty("toggleKey")&&("disabled"==this.get("toggleKey")?this._clickDisposer=this.events.on("click",(()=>{if(!this._isDragging){let e=this.series;e&&e.selectDataItem(this.dataItem)}})):this._clickDisposer&&this._clickDisposer.dispose())}}Object.defineProperty(_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HierarchyNode"}),Object.defineProperty(_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.W.classNames.concat([_.className])});var b=i(5071),x=i(5040);function w(e){var t=0,i=e.children,a=i&&i.length;if(a)for(;--a>=0;)t+=i[a].value;else t=1;e.value=t}function k(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=N)):void 0===t&&(t=D);for(var i,a,n,r,s,o=new A(e),l=[o];i=l.pop();)if((n=t(i.data))&&(s=(n=Array.from(n)).length))for(i.children=n,r=s-1;r>=0;--r)l.push(a=n[r]=new A(n[r])),a.parent=i,a.depth=i.depth+1;return o.eachBefore(I)}function D(e){return e.children}function N(e){return Array.isArray(e)?e[1]:null}function P(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function I(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function A(e){this.data=e,this.depth=this.height=0,this.parent=null}A.prototype=k.prototype={constructor:A,count:function(){return this.eachAfter(w)},each:function(e,t){let i=-1;for(const a of this)e.call(t,a,++i,this);return this},eachAfter:function(e,t){for(var i,a,n,r=this,s=[r],o=[],l=-1;r=s.pop();)if(o.push(r),i=r.children)for(a=0,n=i.length;a<n;++a)s.push(i[a]);for(;r=o.pop();)e.call(t,r,++l,this);return this},eachBefore:function(e,t){for(var i,a,n=this,r=[n],s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this},find:function(e,t){let i=-1;for(const a of this)if(e.call(t,a,++i,this))return a},sum:function(e){return this.eachAfter((function(t){for(var i=+e(t.data)||0,a=t.children,n=a&&a.length;--n>=0;)i+=a[n].value;t.value=i}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,i=function(e,t){if(e===t)return e;var i=e.ancestors(),a=t.ancestors(),n=null;for(e=i.pop(),t=a.pop();e===t;)n=e,e=i.pop(),t=a.pop();return n}(t,e),a=[t];t!==i;)t=t.parent,a.push(t);for(var n=a.length;e!==i;)a.splice(n,0,e),e=e.parent;return a},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(i){i!==e&&t.push({source:i.parent,target:i})})),t},copy:function(){return k(this).eachBefore(P)},[Symbol.iterator]:function*(){var e,t,i,a,n=this,r=[n];do{for(e=r.reverse(),r=[];n=e.pop();)if(yield n,t=n.children)for(i=0,a=t.length;i<a;++i)r.push(t[i])}while(r.length)}};class T extends y.F{constructor(){super(...arguments),Object.defineProperty(this,"nodesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(h.W.new(this._root,{isMeasured:!1}))}),Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_treeData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"hierarchy"}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>_.new(this._root,{themeTags:p.mergeTags(this.nodes.template.get("themeTags",[]),[this._tag,"hierarchy","node"])},this.nodes.template)))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>c._.new(this._root,{themeTags:p.mergeTags(this.labels.template.get("themeTags",[]),[this._tag])},this.labels.template)))}),Object.defineProperty(this,"_currentDownDepth",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}makeNode(e){const t=e.get("childData"),i=this.nodes.make();i.series=this,i._setDataItem(e),this.nodes.push(i),e.setRaw("node",i);const a=this.labels.make();a._setDataItem(e),e.setRaw("label",a),this.labels.push(a),t&&0!=t.length||i.addTag("last");const n=e.get("depth");return i.addTag("depth"+n),this.nodesContainer.children.push(i),i.children.push(a),i}_afterNew(){this._defaultThemes.push(l.new(this._root)),this.fields.push("category","childData","disabled","fill"),this.children.push(this.bulletsContainer),super._afterNew()}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty){this._treeData={};const e=this.dataItems[0];if(e&&(this._makeHierarchyData(this._treeData,e),this._index=0,this._rootNode=k(this._treeData),this._rootNode)){this._rootNode.sum((e=>e.value));const e=this.get("sort");"descending"==e?this._rootNode.sort(((e,t)=>t.value-e.value)):"ascending"==e&&this._rootNode.sort(((e,t)=>e.value-t.value)),this.setPrivateRaw("valueLow",1/0),this.setPrivateRaw("valueHigh",-1/0),this.setPrivateRaw("maxDepth",0),this._updateValues(this._rootNode)}}(this._valuesDirty||this._sizeDirty)&&this._updateVisuals(),this._sizeDirty&&this._selectDataItem(this.get("selectedDataItem"),this._currentDownDepth,!1)}_changed(){super._changed(),this.isDirty("selectedDataItem")&&this._selectDataItem(this.get("selectedDataItem"))}_updateVisuals(){this._rootNode&&this._updateNodes(this._rootNode)}_updateNodes(e){const t=e.data.dataItem;if(t){this._updateNode(t),this.bullets.length>0&&!t.bullets&&this._makeBullets(t);const i=e.children;i&&b.each(i,(e=>{this._updateNodes(e)}))}}_updateNode(e){}_getDataItemById(e,t){let i;return b.each(e,(e=>{e.get("id")==t&&(i=e);const a=e.get("children");if(a){let e=this._getDataItemById(a,t);e&&(i=e)}})),i}_handleBullets(e){b.each(e,(e=>{const t=e.bullets;t&&(b.each(t,(e=>{e.dispose()})),e.bullets=void 0);const i=e.get("children");i&&this._handleBullets(i)})),this._updateVisuals()}_onDataClear(){super._onDataClear();const e=this.get("colors");e&&e.reset()}processDataItem(e){super.processDataItem(e);const t=e.get("childData"),i=this.get("colors"),a=this.get("topDepth",0);e.get("parent")||(e.setRaw("depth",0),i&&0==a&&null==e.get("fill")&&e.setRaw("fill",i.next()));let n=e.get("depth");const r=this.get("initialDepth",1);if(this.makeNode(e),this._processDataItem(e),t){const a=[];e.setRaw("children",a),b.each(t,(t=>{const r=new v.z(this,t,this._makeDataItem(t));a.push(r),r.setRaw("parent",e),r.setRaw("depth",n+1),1==this.dataItems.length&&0==n?i&&null==r.get("fill")&&r.setRaw("fill",i.next()):r.setRaw("fill",e.get("fill")),this.processDataItem(r)}))}const s=e.get("children");s&&0!=s.length||e.get("node").setAll({toggleKey:void 0}),null==e.get("disabled")&&n>=a+r&&this.disableDataItem(e,0)}_processDataItem(e){}_updateValues(e){const t=e.data.dataItem;if(e.depth>this.getPrivate("maxDepth")&&this.setPrivateRaw("maxDepth",e.depth),t){t.setRaw("d3HierarchyNode",e),e.index=this._index,this._index++,t.get("node").set("disabled",t.get("disabled"));let i=e.data.value,a=e.value;if(null!=i&&(a=i,e.value=a),x.isNumber(a)){t.setRaw("sum",a),t.setRaw("valuePercentTotal",a/this.dataItems[0].get("sum")*100);let e=100;const i=t.get("parent");i&&(e=a/i.get("sum")*100),t.get("label").text.markDirtyText(),t.setRaw("valuePercent",e),this.getPrivate("valueLow")>a&&this.setPrivateRaw("valueLow",a),this.getPrivate("valueHigh")<a&&this.setPrivateRaw("valueHigh",a)}this.updateLegendValue(t)}const i=e.children;i&&b.each(i,(e=>{this._updateValues(e)}))}_makeHierarchyData(e,t){e.dataItem=t;const i=t.get("children");if(i){const a=[];e.children=a,b.each(i,(e=>{const t={};a.push(t),this._makeHierarchyData(t,e)}));const n=t.get("valueWorking");x.isNumber(n)&&(e.value=n)}else{const i=t.get("valueWorking");x.isNumber(i)&&(e.value=i)}}disposeDataItem(e){super.disposeDataItem(e);const t=e.get("node");t&&(this.nodes.removeValue(t),t.dispose());const i=e.get("label");i&&(this.labels.removeValue(i),i.dispose());const a=e.get("children");a&&b.each(a,(e=>{this.disposeDataItem(e)}))}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,m.mG)(this,void 0,void 0,(function*(){const a=[i.hideDataItem.call(this,e,t)],n=this.states.create("hidden",{});if(!x.isNumber(t)){const e="stateAnimationDuration";t=n.get(e,this.get(e,0))}const r="stateAnimationEasing",s=n.get(r,this.get(r)),o=e.get("children");o&&0!=o.length||!x.isNumber(e.get("value"))||a.push(e.animate({key:"valueWorking",to:0,duration:t,easing:s}).waitForStop());const l=e.get("node");l.hide(),l.hideTooltip(),o&&b.each(o,(e=>{a.push(this.hideDataItem(e))})),yield Promise.all(a)}))}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,m.mG)(this,void 0,void 0,(function*(){const a=[i.showDataItem.call(this,e,t)];x.isNumber(t)||(t=this.get("stateAnimationDuration",0));const n=this.get("stateAnimationEasing"),r=e.get("children");r&&0!=r.length||!x.isNumber(e.get("value"))||a.push(e.animate({key:"valueWorking",to:e.get("value"),duration:t,easing:n}).waitForStop()),e.get("node").show(),r&&b.each(r,(e=>{a.push(this.showDataItem(e))})),yield Promise.all(a)}))}enableDataItem(e,t,i,a){null==i&&(i=0),null==t&&(t=1),e.set("disabled",!1),e.get("node").set("disabled",!1),e.isHidden()||e.get("node").show(a);const n=this.get("topDepth",0);if(e.get("depth")<n&&e.get("node").hide(0),0==i){const t=this.get("upDepth",1/0);let i=e,a=0;for(;void 0!==i;)a>t&&i.get("node").hide(),i=i.get("parent"),a++}let r=e.get("children");r&&(i<t-1?b.each(r,(e=>{this.enableDataItem(e,t,i+1,a)})):b.each(r,(e=>{e.isHidden()||(e.get("node").show(a),e.get("node").states.applyAnimate("disabled"),e.set("disabled",!0),this.disableDataItem(e))})))}disableDataItem(e,t){e.set("disabled",!0);let i=e.get("children");i&&b.each(i,(e=>{this.disableDataItem(e,t),e.get("node").hide(t)}))}_selectDataItem(e,t,i){if(e){if(!i){const t="dataitemselected";this.events.dispatch(t,{type:t,target:this,dataItem:e})}let a=this.getPrivate("maxDepth",1);const n=this.get("topDepth",0);null==t&&(t=Math.min(this.get("downDepth",1),a-e.get("depth"))),this.inited||(t=Math.min(this.get("initialDepth",1),a-n)),this._currentDownDepth=t;const r=e.get("d3HierarchyNode");let s=r.depth;s+t>a&&(t=a-s),s<n&&(t+=n-s,s=n);const o=e.get("children");o&&o.length>0?(t>0?this.enableDataItem(e,t):(e.get("node").show(),b.each(o,(e=>{e.get("node").hide()}))),r.depth<n&&e.get("node").hide(0),this.get("singleBranchOnly")&&this._handleSingle(e)):this.enableDataItem(this.dataItems[0],t,0),this._zoom(e)}}_zoom(e){}_handleSingle(e){const t=e.get("parent");if(t){const i=t.get("children");i&&b.each(i,(t=>{t!=e&&this.disableDataItem(t)}))}}selectDataItem(e){const t=e.get("parent"),i=this.getPrivate("maxDepth",1);if(this.get("selectedDataItem")==e)if(t)this.set("selectedDataItem",t);else{let t=Math.min(this.get("downDepth",1),i-e.get("depth"));this._currentDownDepth==t&&(t=Math.min(this.get("initialDepth",1),i-this.get("topDepth",0))),this._selectDataItem(e,t)}else this.set("selectedDataItem",e)}_makeBullet(e,t,i){const a=super._makeBullet(e,t,i);if(a){const t=a.get("sprite"),i=e.get("node");t&&(i.children.push(t),i.on("width",(()=>{this._positionBullet(a)})),i.on("height",(()=>{this._positionBullet(a)})))}return a}_positionBullet(e){const t=e.get("sprite");if(t){const i=t.dataItem,a=e.get("locationX",.5),n=e.get("locationY",.5),r=i.get("node");t.set("x",r.width()*a),t.set("y",r.height()*n)}}hoverDataItem(e){const t=e.get("node");t&&!t.isHidden()&&t.hover()}unhoverDataItem(e){const t=e.get("node");t&&t.unhover()}}Object.defineProperty(T,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Hierarchy"}),Object.defineProperty(T,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.F.classNames.concat([T.className])});class O extends _{_afterNew(){super._afterNew(),this.states.create("disabled",{}),this.states.create("hover",{}),this.states.create("hoverDisabled",{})}_updateLinks(e){const t=this.dataItem;if(t){let i=t.get("links");b.each(i,(t=>{let i=t.get("source"),a=t.get("target");i&&a&&(i.get("node").isHidden()||a.get("node").isHidden()?t.hide(e):t.show(e))}))}}_prepareChildren(){super._prepareChildren(),this.isDirty("disabled")&&this._updateLinks()}_onHide(e){super._onHide(e),this._updateLinks(e)}_onShow(e){super._onShow(e),this._updateLinks(e)}}Object.defineProperty(O,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinkedHierarchyNode"}),Object.defineProperty(O,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_.classNames.concat([O.className])});var R=i(1479);class L extends R.T{_changed(){if(super._changed(),this._clear){let e=this.get("source"),t=this.get("target");if(e&&t){const i=e.get("node"),a=t.get("node");this._display.moveTo(i.x(),i.y()),this._display.lineTo(a.x(),a.y())}}}_beforeChanged(){if(super._beforeChanged(),this.isDirty("source")){const e=this.get("source");e&&e.get("node").events.on("positionchanged",(()=>{this._markDirtyKey("stroke")}))}if(this.isDirty("target")){const e=this.get("target");e&&e.get("node").events.on("positionchanged",(()=>{this._markDirtyKey("stroke")}))}}}Object.defineProperty(L,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HierarchyLink"}),Object.defineProperty(L,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.T.classNames.concat([L.className])});var C=i(8035);class S extends T{constructor(){super(...arguments),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>O._new(this._root,{themeTags:p.mergeTags(this.nodes.template.get("themeTags",[]),[this._tag,"linkedhierarchy","hierarchy","node"]),x:this.width()/2,y:this.height()/2},[this.nodes.template])))}),Object.defineProperty(this,"circles",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>C.C._new(this._root,{themeTags:p.mergeTags(this.circles.template.get("themeTags",[]),[this._tag,"shape"])},[this.circles.template])))}),Object.defineProperty(this,"outerCircles",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>C.C._new(this._root,{themeTags:p.mergeTags(this.outerCircles.template.get("themeTags",[]),[this._tag,"outer","shape"])},[this.outerCircles.template])))}),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>L._new(this._root,{themeTags:p.mergeTags(this.links.template.get("themeTags",[]),[this._tag,"linkedhierarchy","hierarchy","link"])},[this.links.template])))}),Object.defineProperty(this,"linksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.moveValue(h.W.new(this._root,{}),0)})}_afterNew(){this.fields.push("linkWith","x","y"),super._afterNew()}makeNode(e){const t=super.makeNode(e),i=t.children.moveValue(this.circles.make(),0);this.circles.push(i),t.setPrivate("tooltipTarget",i),e.setRaw("circle",i);const a=t.children.moveValue(this.outerCircles.make(),0);this.outerCircles.push(a),e.setRaw("outerCircle",a);const n=e.get("label");i.on("radius",(()=>{const e=2*i.get("radius",this.width());n.setAll({maxWidth:e,maxHeight:e}),a.set("radius",e/2),this._handleRadiusChange()}));const r=2*i.get("radius",this.width());return n.setAll({maxWidth:r,maxHeight:r}),i._setDataItem(e),a._setDataItem(e),t}_handleRadiusChange(){}processDataItem(e){e.setRaw("childLinks",[]),e.setRaw("links",[]),super.processDataItem(e)}_processDataItem(e){super._processDataItem(e);const t=e.get("parent");if(t&&t.get("depth")>=this.get("topDepth")){const i=this.linkDataItems(t,e);e.setRaw("parentLink",i)}const i=e.get("node");this.updateLinkWith(this.dataItems),i._updateLinks(0)}updateLinkWith(e){b.each(e,(e=>{const t=e.get("linkWith");t&&b.each(t,(t=>{const i=this._getDataItemById(this.dataItems,t);i&&this.linkDataItems(e,i)}));const i=e.get("children");i&&this.updateLinkWith(i)}))}_getPoint(e){return{x:e.x,y:e.y}}_animatePositions(e){const t=e.get("node"),i=e.get("d3HierarchyNode"),a=this._getPoint(i),n=this.get("animationDuration",0),r=this.get("animationEasing");t.animate({key:"x",to:a.x,duration:n,easing:r}),t.animate({key:"y",to:a.y,duration:n,easing:r})}_updateNode(e){super._updateNode(e),this._animatePositions(e);const t=e.get("d3HierarchyNode").children;t&&b.each(t,(e=>{this._updateNodes(e)}));const i=e.get("fill"),a=e.get("circle"),n=e.get("children");a&&(a._setDefault("fill",i),a._setDefault("stroke",i));const r=e.get("outerCircle");r&&(r._setDefault("fill",i),r._setDefault("stroke",i),n&&0!=n.length||r.setPrivate("visible",!1))}linkDataItems(e,t,i){let a;const n=e.get("links");n&&b.each(n,(e=>{e.get("target")==t&&(a=e)}));const r=t.get("links");return r&&b.each(r,(t=>{t.get("target")==e&&(a=t)})),a||(a=this.links.make(),this.links.push(a),this.linksContainer.children.push(a),a.set("source",e),a.set("target",t),a._setDataItem(e),a.set("stroke",e.get("fill")),null!=i&&a.set("strength",i),e.get("childLinks").push(a),b.move(e.get("links"),a),b.move(t.get("links"),a),this._processLink(a,e,t)),a}unlinkDataItems(e,t){let i;const a=e.get("links");a&&b.each(a,(e=>{e&&e.get("target")==t&&(i=e,b.remove(a,i))}));const n=t.get("links");n&&b.each(n,(t=>{t&&t.get("target")==e&&(i=t,b.remove(n,i))})),i&&this._disposeLink(i),this._handleUnlink()}_handleUnlink(){}_disposeLink(e){this.links.removeValue(e),e.dispose()}areLinked(e,t){const i=e.get("links");let a=!1;i&&b.each(i,(e=>{e.get("target")==t&&(a=!0)}));const n=t.get("links");return n&&b.each(n,(t=>{t.get("target")==e&&(a=!0)})),a}_processLink(e,t,i){}disposeDataItem(e){super.disposeDataItem(e);const t=e.get("links");t&&b.each(t,(e=>{this._disposeLink(e)}))}selectDataItem(e){const t=e.get("parent");if(e.get("disabled")){if(t){this.setRaw("selectedDataItem",t);const i="dataitemselected";this.events.dispatch(i,{type:i,target:this,dataItem:t}),this.disableDataItem(e)}}else this.set("selectedDataItem",e)}}Object.defineProperty(S,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinkedHierarchy"}),Object.defineProperty(S,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:T.classNames.concat([S.className])});var j=i(4138),B=i(7738);const H=4294967296;function M(e){return e.x}function z(e){return e.y}var W=Math.PI*(3-Math.sqrt(5));function V(e){var t,i=1,a=.001,n=1-Math.pow(a,1/300),r=0,s=.6,o=new Map,l=(0,B.HT)(u),h=(0,j.Z)("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%H)/H}();function u(){d(),h.call("tick",t),i<a&&(l.stop(),h.call("end",t))}function d(a){var l,h,c=e.length;void 0===a&&(a=1);for(var u=0;u<a;++u)for(i+=(r-i)*n,o.forEach((function(e){e(i)})),l=0;l<c;++l)null==(h=e[l]).fx?h.x+=h.vx*=s:(h.x=h.fx,h.vx=0),null==h.fy?h.y+=h.vy*=s:(h.y=h.fy,h.vy=0);return t}function g(){for(var t,i=0,a=e.length;i<a;++i){if((t=e[i]).index=i,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var n=10*Math.sqrt(.5+i),r=i*W;t.x=n*Math.cos(r),t.y=n*Math.sin(r)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),g(),t={tick:d,restart:function(){return l.restart(u),t},stop:function(){return l.stop(),t},nodes:function(i){return arguments.length?(e=i,g(),o.forEach(p),t):e},alpha:function(e){return arguments.length?(i=+e,t):i},alphaMin:function(e){return arguments.length?(a=+e,t):a},alphaDecay:function(e){return arguments.length?(n=+e,t):+n},alphaTarget:function(e){return arguments.length?(r=+e,t):r},velocityDecay:function(e){return arguments.length?(s=1-e,t):1-s},randomSource:function(e){return arguments.length?(c=e,o.forEach(p),t):c},force:function(e,i){return arguments.length>1?(null==i?o.delete(e):o.set(e,p(i)),t):o.get(e)},find:function(t,i,a){var n,r,s,o,l,h=0,c=e.length;for(null==a?a=1/0:a*=a,h=0;h<c;++h)(s=(n=t-(o=e[h]).x)*n+(r=i-o.y)*r)<a&&(l=o,a=s);return l},on:function(e,i){return arguments.length>1?(h.on(e,i),t):h.on(e)}}}function Y(e,t,i,a){if(isNaN(t)||isNaN(i))return e;var n,r,s,o,l,h,c,u,d,g=e._root,p={data:a},f=e._x0,m=e._y0,y=e._x1,v=e._y1;if(!g)return e._root=p,e;for(;g.length;)if((h=t>=(r=(f+y)/2))?f=r:y=r,(c=i>=(s=(m+v)/2))?m=s:v=s,n=g,!(g=g[u=c<<1|h]))return n[u]=p,e;if(o=+e._x.call(null,g.data),l=+e._y.call(null,g.data),t===o&&i===l)return p.next=g,n?n[u]=p:e._root=p,e;do{n=n?n[u]=new Array(4):e._root=new Array(4),(h=t>=(r=(f+y)/2))?f=r:y=r,(c=i>=(s=(m+v)/2))?m=s:v=s}while((u=c<<1|h)==(d=(l>=s)<<1|o>=r));return n[d]=g,n[u]=p,e}function F(e,t,i,a,n){this.node=e,this.x0=t,this.y0=i,this.x1=a,this.y1=n}function X(e){return e[0]}function E(e){return e[1]}function q(e,t,i){var a=new Q(null==t?X:t,null==i?E:i,NaN,NaN,NaN,NaN);return null==e?a:a.addAll(e)}function Q(e,t,i,a,n,r){this._x=e,this._y=t,this._x0=i,this._y0=a,this._x1=n,this._y1=r,this._root=void 0}function K(e){for(var t={data:e.data},i=t;e=e.next;)i=i.next={data:e.data};return t}var U=q.prototype=Q.prototype;function G(e){return function(){return e}}function Z(e){return 1e-6*(e()-.5)}function J(e){return e.x+e.vx}function $(e){return e.y+e.vy}function ee(e){var t,i,a,n=1,r=1;function s(){for(var e,s,l,h,c,u,d,g=t.length,p=0;p<r;++p)for(s=q(t,J,$).visitAfter(o),e=0;e<g;++e)l=t[e],u=i[l.index],d=u*u,h=l.x+l.vx,c=l.y+l.vy,s.visit(f);function f(e,t,i,r,s){var o=e.data,g=e.r,p=u+g;if(!o)return t>h+p||r<h-p||i>c+p||s<c-p;if(o.index>l.index){var f=h-o.x-o.vx,m=c-o.y-o.vy,y=f*f+m*m;y<p*p&&(0===f&&(y+=(f=Z(a))*f),0===m&&(y+=(m=Z(a))*m),y=(p-(y=Math.sqrt(y)))/y*n,l.vx+=(f*=y)*(p=(g*=g)/(d+g)),l.vy+=(m*=y)*p,o.vx-=f*(p=1-p),o.vy-=m*p)}}}function o(e){if(e.data)return e.r=i[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var a,n,r=t.length;for(i=new Array(r),a=0;a<r;++a)n=t[a],i[n.index]=+e(n,a,t)}}return"function"!=typeof e&&(e=G(null==e?1:+e)),s.initialize=function(e,i){t=e,a=i,l()},s.iterations=function(e){return arguments.length?(r=+e,s):r},s.strength=function(e){return arguments.length?(n=+e,s):n},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:G(+t),l(),s):e},s}function te(e){return e.index}function ie(e,t){var i=e.get(t);if(!i)throw new Error("node not found: "+t);return i}function ae(e){var t,i,a,n,r,s,o=te,l=function(e){return 1/Math.min(n[e.source.index],n[e.target.index])},h=G(30),c=1;function u(a){for(var n=0,o=e.length;n<c;++n)for(var l,h,u,d,g,p,f,m=0;m<o;++m)h=(l=e[m]).source,d=(u=l.target).x+u.vx-h.x-h.vx||Z(s),g=u.y+u.vy-h.y-h.vy||Z(s),d*=p=((p=Math.sqrt(d*d+g*g))-i[m])/p*a*t[m],g*=p,u.vx-=d*(f=r[m]),u.vy-=g*f,h.vx+=d*(f=1-f),h.vy+=g*f}function d(){if(a){var s,l,h=a.length,c=e.length,u=new Map(a.map(((e,t)=>[o(e,t,a),e])));for(s=0,n=new Array(h);s<c;++s)(l=e[s]).index=s,"object"!=typeof l.source&&(l.source=ie(u,l.source)),"object"!=typeof l.target&&(l.target=ie(u,l.target)),n[l.source.index]=(n[l.source.index]||0)+1,n[l.target.index]=(n[l.target.index]||0)+1;for(s=0,r=new Array(c);s<c;++s)l=e[s],r[s]=n[l.source.index]/(n[l.source.index]+n[l.target.index]);t=new Array(c),g(),i=new Array(c),p()}}function g(){if(a)for(var i=0,n=e.length;i<n;++i)t[i]=+l(e[i],i,e)}function p(){if(a)for(var t=0,n=e.length;t<n;++t)i[t]=+h(e[t],t,e)}return null==e&&(e=[]),u.initialize=function(e,t){a=e,s=t,d()},u.links=function(t){return arguments.length?(e=t,d(),u):e},u.id=function(e){return arguments.length?(o=e,u):o},u.iterations=function(e){return arguments.length?(c=+e,u):c},u.strength=function(e){return arguments.length?(l="function"==typeof e?e:G(+e),g(),u):l},u.distance=function(e){return arguments.length?(h="function"==typeof e?e:G(+e),p(),u):h},u}U.copy=function(){var e,t,i=new Q(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return i;if(!a.length)return i._root=K(a),i;for(e=[{source:a,target:i._root=new Array(4)}];a=e.pop();)for(var n=0;n<4;++n)(t=a.source[n])&&(t.length?e.push({source:t,target:a.target[n]=new Array(4)}):a.target[n]=K(t));return i},U.add=function(e){const t=+this._x.call(null,e),i=+this._y.call(null,e);return Y(this.cover(t,i),t,i,e)},U.addAll=function(e){var t,i,a,n,r=e.length,s=new Array(r),o=new Array(r),l=1/0,h=1/0,c=-1/0,u=-1/0;for(i=0;i<r;++i)isNaN(a=+this._x.call(null,t=e[i]))||isNaN(n=+this._y.call(null,t))||(s[i]=a,o[i]=n,a<l&&(l=a),a>c&&(c=a),n<h&&(h=n),n>u&&(u=n));if(l>c||h>u)return this;for(this.cover(l,h).cover(c,u),i=0;i<r;++i)Y(this,s[i],o[i],e[i]);return this},U.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,a=this._y0,n=this._x1,r=this._y1;if(isNaN(i))n=(i=Math.floor(e))+1,r=(a=Math.floor(t))+1;else{for(var s,o,l=n-i||1,h=this._root;i>e||e>=n||a>t||t>=r;)switch(o=(t<a)<<1|e<i,(s=new Array(4))[o]=h,h=s,l*=2,o){case 0:n=i+l,r=a+l;break;case 1:i=n-l,r=a+l;break;case 2:n=i+l,a=r-l;break;case 3:i=n-l,a=r-l}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=a,this._x1=n,this._y1=r,this},U.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},U.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},U.find=function(e,t,i){var a,n,r,s,o,l,h,c=this._x0,u=this._y0,d=this._x1,g=this._y1,p=[],f=this._root;for(f&&p.push(new F(f,c,u,d,g)),null==i?i=1/0:(c=e-i,u=t-i,d=e+i,g=t+i,i*=i);l=p.pop();)if(!(!(f=l.node)||(n=l.x0)>d||(r=l.y0)>g||(s=l.x1)<c||(o=l.y1)<u))if(f.length){var m=(n+s)/2,y=(r+o)/2;p.push(new F(f[3],m,y,s,o),new F(f[2],n,y,m,o),new F(f[1],m,r,s,y),new F(f[0],n,r,m,y)),(h=(t>=y)<<1|e>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-h],p[p.length-1-h]=l)}else{var v=e-+this._x.call(null,f.data),_=t-+this._y.call(null,f.data),b=v*v+_*_;if(b<i){var x=Math.sqrt(i=b);c=e-x,u=t-x,d=e+x,g=t+x,a=f.data}}return a},U.remove=function(e){if(isNaN(r=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var t,i,a,n,r,s,o,l,h,c,u,d,g=this._root,p=this._x0,f=this._y0,m=this._x1,y=this._y1;if(!g)return this;if(g.length)for(;;){if((h=r>=(o=(p+m)/2))?p=o:m=o,(c=s>=(l=(f+y)/2))?f=l:y=l,t=g,!(g=g[u=c<<1|h]))return this;if(!g.length)break;(t[u+1&3]||t[u+2&3]||t[u+3&3])&&(i=t,d=u)}for(;g.data!==e;)if(a=g,!(g=g.next))return this;return(n=g.next)&&delete g.next,a?(n?a.next=n:delete a.next,this):t?(n?t[u]=n:delete t[u],(g=t[0]||t[1]||t[2]||t[3])&&g===(t[3]||t[2]||t[1]||t[0])&&!g.length&&(i?i[d]=g:this._root=g),this):(this._root=n,this)},U.removeAll=function(e){for(var t=0,i=e.length;t<i;++t)this.remove(e[t]);return this},U.root=function(){return this._root},U.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},U.visit=function(e){var t,i,a,n,r,s,o=[],l=this._root;for(l&&o.push(new F(l,this._x0,this._y0,this._x1,this._y1));t=o.pop();)if(!e(l=t.node,a=t.x0,n=t.y0,r=t.x1,s=t.y1)&&l.length){var h=(a+r)/2,c=(n+s)/2;(i=l[3])&&o.push(new F(i,h,c,r,s)),(i=l[2])&&o.push(new F(i,a,c,h,s)),(i=l[1])&&o.push(new F(i,h,n,r,c)),(i=l[0])&&o.push(new F(i,a,n,h,c))}return this},U.visitAfter=function(e){var t,i=[],a=[];for(this._root&&i.push(new F(this._root,this._x0,this._y0,this._x1,this._y1));t=i.pop();){var n=t.node;if(n.length){var r,s=t.x0,o=t.y0,l=t.x1,h=t.y1,c=(s+l)/2,u=(o+h)/2;(r=n[0])&&i.push(new F(r,s,o,c,u)),(r=n[1])&&i.push(new F(r,c,o,l,u)),(r=n[2])&&i.push(new F(r,s,u,c,h)),(r=n[3])&&i.push(new F(r,c,u,l,h))}a.push(t)}for(;t=a.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},U.x=function(e){return arguments.length?(this._x=e,this):this._x},U.y=function(e){return arguments.length?(this._y=e,this):this._y};class ne extends S{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"forcedirected"}),Object.defineProperty(this,"d3forceSimulation",{enumerable:!0,configurable:!0,writable:!0,value:V()}),Object.defineProperty(this,"collisionForce",{enumerable:!0,configurable:!0,writable:!0,value:ee(20)}),Object.defineProperty(this,"linkForce",{enumerable:!0,configurable:!0,writable:!0,value:ae()}),Object.defineProperty(this,"_nodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_links",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_tick",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_nodesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this.d3forceSimulation.on("tick",(()=>{this._tick++,this.updateNodePositions()}))}_prepareChildren(){super._prepareChildren(),this.isDirty("showOnFrame")&&this.get("showOnFrame")>this._tick&&(this.nodesContainer.setPrivate("visible",!1),this.linksContainer.setPrivate("visible",!1));const e=this.d3forceSimulation;this.isDirty("velocityDecay")&&e.velocityDecay(this.get("velocityDecay",0)),this.isDirty("initialFrames")&&e.alphaDecay(1-Math.pow(.001,1/this.get("initialFrames",500)))}restartSimulation(e){const t=this.d3forceSimulation;t.alpha()<e&&(t.alpha(e),t.restart())}_handleRadiusChange(){this._updateForces()}processDataItem(e){const t={index:this._index,x:this.innerWidth()/2,y:this.innerHeight()/2,dataItem:e},i=this._nodes.push(t)-1;t.index=i,this.d3forceSimulation.nodes(this._nodes),e.set("d3ForceNode",t),super.processDataItem(e);const a=e.get("node");a.set("x",-1e4),a.on("scale",(()=>{this._updateForces()})),a.events.on("dragged",(()=>{t.fx=a.x(),t.fy=a.y(),this._updateForces()})),a.events.on("dragstop",(()=>{null==e.get("x")&&(t.fx=void 0),null==e.get("y")&&(t.fy=void 0)}))}_updateValues(e){super._updateValues(e),this._nodesDirty=!0;const t=this.d3forceSimulation;t.force("collision",this.collisionForce),t.nodes(this._nodes),this.linkForce=ae(this._links),t.force("link",this.linkForce)}_updateVisuals(){super._updateVisuals(),this.restartSimulation(1)}_updateChildren(){super._updateChildren();const e=this.d3forceSimulation;if(this._sizeDirty){let t=Math.max(50,this.innerWidth()),i=Math.max(50,this.innerHeight()),a=this.get("paddingTop",0),n=this.get("paddingLeft",0),r=this.get("centerStrength",1);e.force("x",function(e){var t,i,a,n=G(.1);function r(e){for(var n,r=0,s=t.length;r<s;++r)(n=t[r]).vx+=(a[r]-n.x)*i[r]*e}function s(){if(t){var r,s=t.length;for(i=new Array(s),a=new Array(s),r=0;r<s;++r)i[r]=isNaN(a[r]=+e(t[r],r,t))?0:+n(t[r],r,t)}}return"function"!=typeof e&&(e=G(null==e?0:+e)),r.initialize=function(e){t=e,s()},r.strength=function(e){return arguments.length?(n="function"==typeof e?e:G(+e),s(),r):n},r.x=function(t){return arguments.length?(e="function"==typeof t?t:G(+t),s(),r):e},r}().x(t/2+n).strength(100*r/t)),e.force("y",function(e){var t,i,a,n=G(.1);function r(e){for(var n,r=0,s=t.length;r<s;++r)(n=t[r]).vy+=(a[r]-n.y)*i[r]*e}function s(){if(t){var r,s=t.length;for(i=new Array(s),a=new Array(s),r=0;r<s;++r)i[r]=isNaN(a[r]=+e(t[r],r,t))?0:+n(t[r],r,t)}}return"function"!=typeof e&&(e=G(null==e?0:+e)),r.initialize=function(e){t=e,s()},r.strength=function(e){return arguments.length?(n="function"==typeof e?e:G(+e),s(),r):n},r.y=function(t){return arguments.length?(e="function"==typeof t?t:G(+t),s(),r):e},r}().y(i/2+a).strength(100*r/i))}this._nodesDirty&&this._updateForces()}_updateForces(){this.d3forceSimulation.force("manybody",function(){var e,t,i,a,n,r=G(-30),s=1,o=1/0,l=.81;function h(i){var n,r=e.length,s=q(e,M,z).visitAfter(u);for(a=i,n=0;n<r;++n)t=e[n],s.visit(d)}function c(){if(e){var t,i,a=e.length;for(n=new Array(a),t=0;t<a;++t)i=e[t],n[i.index]=+r(i,t,e)}}function u(e){var t,i,a,r,s,o=0,l=0;if(e.length){for(a=r=s=0;s<4;++s)(t=e[s])&&(i=Math.abs(t.value))&&(o+=t.value,l+=i,a+=i*t.x,r+=i*t.y);e.x=a/l,e.y=r/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{o+=n[t.data.index]}while(t=t.next)}e.value=o}function d(e,r,h,c){if(!e.value)return!0;var u=e.x-t.x,d=e.y-t.y,g=c-r,p=u*u+d*d;if(g*g/l<p)return p<o&&(0===u&&(p+=(u=Z(i))*u),0===d&&(p+=(d=Z(i))*d),p<s&&(p=Math.sqrt(s*p)),t.vx+=u*e.value*a/p,t.vy+=d*e.value*a/p),!0;if(!(e.length||p>=o)){(e.data!==t||e.next)&&(0===u&&(p+=(u=Z(i))*u),0===d&&(p+=(d=Z(i))*d),p<s&&(p=Math.sqrt(s*p)));do{e.data!==t&&(g=n[e.data.index]*a/p,t.vx+=u*g,t.vy+=d*g)}while(e=e.next)}}return h.initialize=function(t,a){e=t,i=a,c()},h.strength=function(e){return arguments.length?(r="function"==typeof e?e:G(+e),c(),h):r},h.distanceMin=function(e){return arguments.length?(s=e*e,h):Math.sqrt(s)},h.distanceMax=function(e){return arguments.length?(o=e*e,h):Math.sqrt(o)},h.theta=function(e){return arguments.length?(l=e*e,h):Math.sqrt(l)},h}().strength((e=>{let t=e.dataItem,i=t.get("node"),a=t.get("circle"),n=this.get("manyBodyStrength",-15);return a?a.get("radius",1)*i.get("scale",1)*n:0}))),this.collisionForce.radius((e=>{let t=e.dataItem,i=t.get("node"),a=t.get("circle"),n=t.get("outerCircle");if(a&&n){let e=a.get("radius",1);return n.isHidden()||(e*=n.get("scale",1.1)),e*=i.get("scale",1),e+this.get("nodePadding",0)}})),this.restartSimulation(1)}_animatePositions(e){}_clearDirty(){super._clearDirty(),this._nodesDirty=!1}updateNodePositions(){const e=this.linkForce;e&&(e.distance((e=>this.getDistance(e))),e.strength((e=>this.getStrength(e)))),this._tick==this.get("showOnFrame")&&(this.nodesContainer.setPrivate("visible",!0),this.linksContainer.setPrivate("visible",!0));let t=this.d3forceSimulation.nodes();b.each(t,(e=>{const t=e.dataItem.get("node");t.set("x",e.x),t.set("y",e.y)}))}updateLinkWith(e){b.each(e,(e=>{const t=e.get("linkWith");t&&b.each(t,(t=>{const i=this._getDataItemById(this.dataItems,t);i&&this.linkDataItems(e,i,this.get("linkWithStrength"))}));const i=e.get("children");i&&this.updateLinkWith(i)}))}getDistance(e){let t=e.sourceDataItem,i=e.targetDataItem,a=0;if(t&&i){const n=i.get("node");if(n.isHidden())return 0;let r=e.link;r&&(a=r.get("distance",1));const s=t.get("node");return n.isHidden()&&(a=1),a*(t.get("circle").get("radius",1)*s.get("scale",1)+i.get("circle").get("radius",1)*n.get("scale",1))}return a}getStrength(e){let t=0,i=e.link;return i&&(t=i.get("strength",1)),t*=e.targetDataItem.get("node").get("scale"),t}_updateNode(e){super._updateNode(e),this._updateRadius(e);const t=e.get("x"),i=e.get("y"),a=e.get("d3ForceNode");a.fx=null!=t?p.relativeToValue(t,this.innerWidth()):void 0,null!=i?a.fy=p.relativeToValue(i,this.innerHeight()):a.fx=void 0}_updateRadius(e){let t=(this.innerWidth()+this.innerHeight())/2,i=p.relativeToValue(this.get("minRadius",1),t),a=p.relativeToValue(this.get("maxRadius",5),t),n=e.get("sum"),r=a;const s=this.getPrivate("valueLow",0),o=this.getPrivate("valueHigh",0);o>0&&(r=i+(n-s)/(o-s)*(a-i)),x.isNumber(r)||(r=i);const l=this.get("animationDuration",0),h=this.get("animationEasing");e.get("circle").animate({key:"radius",to:r,duration:l,easing:h})}_processLink(e,t,i){const a={link:e,source:t.get("d3ForceNode").index,target:i.get("d3ForceNode").index,sourceDataItem:t,targetDataItem:i};this._links.push(a),e.setPrivate("d3Link",a),this.linkForce=ae(this._links),this.d3forceSimulation.force("link",this.linkForce),this.restartSimulation(.5)}_disposeLink(e){super._disposeLink(e),b.remove(this._links,e.getPrivate("d3Link"))}_handleUnlink(){this.restartSimulation(.5)}_onDataClear(){super._onDataClear(),this._nodes=[],this._links=[]}}function re(e){return null==e?null:se(e)}function se(e){if("function"!=typeof e)throw new Error;return e}function oe(){return 0}function le(e){return function(){return e}}Object.defineProperty(ne,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ForceDirected"}),Object.defineProperty(ne,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([ne.className])});const he=4294967296;function ce(e,t){var i,a;if(ge(t,e))return[t];for(i=0;i<e.length;++i)if(ue(t,e[i])&&ge(fe(e[i],t),e))return[e[i],t];for(i=0;i<e.length-1;++i)for(a=i+1;a<e.length;++a)if(ue(fe(e[i],e[a]),t)&&ue(fe(e[i],t),e[a])&&ue(fe(e[a],t),e[i])&&ge(me(e[i],e[a],t),e))return[e[i],e[a],t];throw new Error}function ue(e,t){var i=e.r-t.r,a=t.x-e.x,n=t.y-e.y;return i<0||i*i<a*a+n*n}function de(e,t){var i=e.r-t.r+1e-9*Math.max(e.r,t.r,1),a=t.x-e.x,n=t.y-e.y;return i>0&&i*i>a*a+n*n}function ge(e,t){for(var i=0;i<t.length;++i)if(!de(e,t[i]))return!1;return!0}function pe(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return fe(e[0],e[1]);case 3:return me(e[0],e[1],e[2])}var t}function fe(e,t){var i=e.x,a=e.y,n=e.r,r=t.x,s=t.y,o=t.r,l=r-i,h=s-a,c=o-n,u=Math.sqrt(l*l+h*h);return{x:(i+r+l/u*c)/2,y:(a+s+h/u*c)/2,r:(u+n+o)/2}}function me(e,t,i){var a=e.x,n=e.y,r=e.r,s=t.x,o=t.y,l=t.r,h=i.x,c=i.y,u=i.r,d=a-s,g=a-h,p=n-o,f=n-c,m=l-r,y=u-r,v=a*a+n*n-r*r,_=v-s*s-o*o+l*l,b=v-h*h-c*c+u*u,x=g*p-d*f,w=(p*b-f*_)/(2*x)-a,k=(f*m-p*y)/x,D=(g*_-d*b)/(2*x)-n,N=(d*y-g*m)/x,P=k*k+N*N-1,I=2*(r+w*k+D*N),A=w*w+D*D-r*r,T=-(Math.abs(P)>1e-6?(I+Math.sqrt(I*I-4*P*A))/(2*P):A/I);return{x:a+w+k*T,y:n+D+N*T,r:T}}function ye(e,t,i){var a,n,r,s,o=e.x-t.x,l=e.y-t.y,h=o*o+l*l;h?(n=t.r+i.r,n*=n,s=e.r+i.r,n>(s*=s)?(a=(h+s-n)/(2*h),r=Math.sqrt(Math.max(0,s/h-a*a)),i.x=e.x-a*o-r*l,i.y=e.y-a*l+r*o):(a=(h+n-s)/(2*h),r=Math.sqrt(Math.max(0,n/h-a*a)),i.x=t.x+a*o-r*l,i.y=t.y+a*l+r*o)):(i.x=t.x+i.r,i.y=t.y)}function ve(e,t){var i=e.r+t.r-1e-6,a=t.x-e.x,n=t.y-e.y;return i>0&&i*i>a*a+n*n}function _e(e){var t=e._,i=e.next._,a=t.r+i.r,n=(t.x*i.r+i.x*t.r)/a,r=(t.y*i.r+i.y*t.r)/a;return n*n+r*r}function be(e){this._=e,this.next=null,this.previous=null}function xe(e,t){if(!(r=(e=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var i,a,n,r,s,o,l,h,c,u,d;if((i=e[0]).x=0,i.y=0,!(r>1))return i.r;if(a=e[1],i.x=-a.r,a.x=i.r,a.y=0,!(r>2))return i.r+a.r;ye(a,i,n=e[2]),i=new be(i),a=new be(a),n=new be(n),i.next=n.previous=a,a.next=i.previous=n,n.next=a.previous=i;e:for(l=3;l<r;++l){ye(i._,a._,n=e[l]),n=new be(n),h=a.next,c=i.previous,u=a._.r,d=i._.r;do{if(u<=d){if(ve(h._,n._)){a=h,i.next=a,a.previous=i,--l;continue e}u+=h._.r,h=h.next}else{if(ve(c._,n._)){(i=c).next=a,a.previous=i,--l;continue e}d+=c._.r,c=c.previous}}while(h!==c.next);for(n.previous=i,n.next=a,i.next=a.previous=a=n,s=_e(i);(n=n.next)!==a;)(o=_e(n))<s&&(i=n,s=o);a=i.next}for(i=[a._],n=a;(n=n.next)!==a;)i.push(n._);for(n=function(e,t){for(var i,a,n=0,r=(e=function(e,t){let i,a,n=e.length;for(;n;)a=t()*n--|0,i=e[n],e[n]=e[a],e[a]=i;return e}(Array.from(e),t)).length,s=[];n<r;)i=e[n],a&&de(a,i)?++n:(a=pe(s=ce(s,i)),n=0);return a}(i,t),l=0;l<r;++l)(i=e[l]).x-=n.x,i.y-=n.y;return n.r}function we(e){return Math.sqrt(e.value)}function ke(){var e=null,t=1,i=1,a=oe;function n(n){const r=function(){let e=1;return()=>(e=(1664525*e+1013904223)%he)/he}();return n.x=t/2,n.y=i/2,e?n.eachBefore(De(e)).eachAfter(Ne(a,.5,r)).eachBefore(Pe(1)):n.eachBefore(De(we)).eachAfter(Ne(oe,1,r)).eachAfter(Ne(a,n.r/Math.min(t,i),r)).eachBefore(Pe(Math.min(t,i)/(2*n.r))),n}return n.radius=function(t){return arguments.length?(e=re(t),n):e},n.size=function(e){return arguments.length?(t=+e[0],i=+e[1],n):[t,i]},n.padding=function(e){return arguments.length?(a="function"==typeof e?e:le(+e),n):a},n}function De(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Ne(e,t,i){return function(a){if(n=a.children){var n,r,s,o=n.length,l=e(a)*t||0;if(l)for(r=0;r<o;++r)n[r].r+=l;if(s=xe(n,i),l)for(r=0;r<o;++r)n[r].r-=l;a.r=s+l}}}function Pe(e){return function(t){var i=t.parent;t.r*=e,i&&(t.x=i.x+e*t.x,t.y=i.y+e*t.y)}}class Ie extends T{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"pack"}),Object.defineProperty(this,"_packLayout",{enumerable:!0,configurable:!0,writable:!0,value:ke()}),Object.defineProperty(this,"_packData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"circles",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>C.C._new(this._root,{themeTags:p.mergeTags(this.circles.template.get("themeTags",[]),[this._tag,"shape"])},[this.circles.template])))})}_afterNew(){super._afterNew(),this.setPrivate("scaleR",1)}_prepareChildren(){super._prepareChildren(),this.isPrivateDirty("scaleR")&&this._rootNode&&this._updateNodesScale(this._rootNode)}_updateVisuals(){if(this._rootNode){const e=this._packLayout;e.size([this.innerWidth(),this.innerHeight()]),e(this._rootNode),e.padding(this.get("nodePadding",0)),this._updateNodes(this._rootNode)}}_updateNode(e){super._updateNode(e);const t=e.get("node"),i=e.get("circle"),a=e.get("d3HierarchyNode"),n=this.getPrivate("scaleR",1),r=a.x*n,s=a.y*n,o=a.r*n,l=this.get("animationDuration",0),h=this.get("animationEasing");if(t.animate({key:"x",to:r,duration:l,easing:h}),t.animate({key:"y",to:s,duration:l,easing:h}),i){const t=e.get("fill");i.animate({key:"radius",to:o,duration:l,easing:h}),i._setDefault("fill",t),i._setDefault("stroke",t)}}_updateNodesScale(e){const t=e.data.dataItem;if(t){const i=t.get("node"),a=t.get("circle"),n=this.getPrivate("scaleR",1),r=e.x*n,s=e.y*n,o=e.r*n;i.setAll({x:r,y:s}),a.set("radius",o);const l=e.children;l&&b.each(l,(e=>{this._updateNodesScale(e)}))}}makeNode(e){const t=super.makeNode(e),i=t.children.moveValue(this.circles.make(),0);t.setPrivate("tooltipTarget",i),this.circles.push(i),e.setRaw("circle",i);const a=e.get("label");return i.on("radius",(()=>{const e=2*i.get("radius",this.width());a.setAll({maxWidth:e,maxHeight:e})})),t}_zoom(e){const t=e.get("d3HierarchyNode");let i=t.x,a=t.y,n=t.r,r=Math.min(this.innerWidth(),this.innerHeight())/(2*n);const s=this.get("animationEasing");let o=this.get("animationDuration",0);this.inited||(o=0),this.animatePrivate({key:"scaleR",to:r,duration:o,easing:s});const l=this.nodesContainer;l.animate({key:"x",from:l.x(),to:this.width()/2-i*r,duration:o,easing:s}),l.animate({key:"y",from:l.y(),to:this.height()/2-a*r,duration:o,easing:s})}}function Ae(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Te(e,t,i,a,n){for(var r,s=e.children,o=-1,l=s.length,h=e.value&&(a-t)/e.value;++o<l;)(r=s[o]).y0=i,r.y1=n,r.x0=t,r.x1=t+=r.value*h}function Oe(){var e=1,t=1,i=0,a=!1;function n(n){var r=n.height+1;return n.x0=n.y0=i,n.x1=e,n.y1=t/r,n.eachBefore(function(e,t){return function(a){a.children&&Te(a,a.x0,e*(a.depth+1)/t,a.x1,e*(a.depth+2)/t);var n=a.x0,r=a.y0,s=a.x1-i,o=a.y1-i;s<n&&(n=s=(n+s)/2),o<r&&(r=o=(r+o)/2),a.x0=n,a.y0=r,a.x1=s,a.y1=o}}(t,r)),a&&n.eachBefore(Ae),n}return n.round=function(e){return arguments.length?(a=!!e,n):a},n.size=function(i){return arguments.length?(e=+i[0],t=+i[1],n):[e,t]},n.padding=function(e){return arguments.length?(i=+e,n):i},n}Object.defineProperty(Ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pack"}),Object.defineProperty(Ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:T.classNames.concat([Ie.className])});class Re extends T{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"partition"}),Object.defineProperty(this,"rectangles",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>u.c._new(this._root,{themeTags:p.mergeTags(this.rectangles.template.get("themeTags",[]),[this._tag,"shape"])},[this.rectangles.template])))}),Object.defineProperty(this,"_partitionLayout",{enumerable:!0,configurable:!0,writable:!0,value:Oe()})}_afterNew(){this._settings.themeTags=p.mergeTags(this._settings.themeTags,["partition",this._settings.orientation||"vertical"]),super._afterNew(),this.setPrivate("scaleX",1),this.setPrivate("scaleY",1)}_prepareChildren(){super._prepareChildren(),this.isDirty("nodePadding")&&this._rootNode&&this._updateNodes(this._rootNode),(this.isPrivateDirty("scaleX")||this.isPrivateDirty("scaleY"))&&this._rootNode&&this._updateNodesScale(this._rootNode),this.isDirty("orientation")&&this._updateVisuals()}_updateVisuals(){if(this._rootNode){const e=this._partitionLayout;let t=this.innerWidth(),i=this.innerHeight();"horizontal"==this.get("orientation")&&([t,i]=[i,t]),e.size([t,i]);const a=this.get("nodePadding");x.isNumber(a)&&e.padding(a),e(this._rootNode),this._updateNodes(this._rootNode)}}_updateNode(e){super._updateNode(e);const t=e.get("node"),i=e.get("rectangle"),a=e.get("d3HierarchyNode"),n=this.getPrivate("scaleX",1),r=this.getPrivate("scaleY",1);let s,o,l,h;"horizontal"==this.get("orientation")?(s=a.y0*n,o=a.y1*n,l=a.x0*r,h=a.x1*r):(s=a.x0*n,o=a.x1*n,l=a.y0*r,h=a.y1*r);let c=o-s,u=h-l;const d=this.get("animationDuration",0),g=this.get("animationEasing");if(t.animate({key:"x",to:s,duration:d,easing:g}),t.animate({key:"y",to:l,duration:d,easing:g}),t.animate({key:"width",to:c,duration:d,easing:g}),t.animate({key:"height",to:u,duration:d,easing:g}),i){const t=e.get("fill");i.animate({key:"width",to:c,duration:d,easing:g}),i.animate({key:"height",to:u,duration:d,easing:g}),i._setDefault("fill",t),i._setDefault("stroke",t)}}_updateNodesScale(e){const t=e.data.dataItem;if(t){const i=t.get("node"),a=t.get("rectangle"),n=this.getPrivate("scaleX",1),r=this.getPrivate("scaleY",1);let s,o,l,h;"horizontal"==this.get("orientation")?(s=e.y0*n,o=e.y1*n,l=e.x0*r,h=e.x1*r):(s=e.x0*n,o=e.x1*n,l=e.y0*r,h=e.y1*r);const c=o-s,u=h-l;i.setAll({x:s,y:l,width:c,height:u}),a.setAll({width:c,height:u});const d=e.children;d&&b.each(d,(e=>{this._updateNodesScale(e)}))}}makeNode(e){const t=super.makeNode(e);return this._makeNode(e,t),t}_makeNode(e,t){const i=t.children.moveValue(this.rectangles.make(),0);t.setPrivate("tooltipTarget",i),e.setRaw("rectangle",i),i._setDataItem(e);const a=e.get("label");i.on("width",(()=>{a.set("maxWidth",i.width())})),i.on("height",(()=>{a.set("maxHeight",i.height())}))}_zoom(e){let t=0,i=0,a=0,n=0;const r=this.get("upDepth",0)+1,s=this.get("topDepth",0),o=this.innerWidth(),l=this.innerHeight(),h=this.getPrivate("maxDepth",1),c=l/(h+1),u=o/(h+1),d=Math.min(this.get("initialDepth",1),h-s);let g=this._currentDownDepth;if(null==g&&(g=this.get("downDepth",1)),e){const h=e.get("d3HierarchyNode");let p=h.depth;"horizontal"==this.get("orientation")?(t=h.y0,i=h.y1,a=h.x0,n=h.x1,t=i-u*r,i=t+u*(g+1),p<s&&(a=0,n=l,t=u*s,i=t+u*d)):(t=h.x0,i=h.x1,a=h.y0,n=h.y1,a=n-c*r,n=a+c*(g+1),p<s&&(t=0,i=o,a=c*s,n=a+c*d))}let p=o/(i-t),f=l/(n-a);const m=this.get("animationEasing");let y=this.get("animationDuration",0);this.inited||(y=0),this.animatePrivate({key:"scaleX",to:p,duration:y,easing:m}),this.animatePrivate({key:"scaleY",to:f,duration:y,easing:m}),this.nodesContainer.animate({key:"x",to:-t*p,duration:y,easing:m}),this.nodesContainer.animate({key:"y",to:-a*f,duration:y,easing:m})}}Object.defineProperty(Re,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Partition"}),Object.defineProperty(Re,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:T.classNames.concat([Re.className])});var Le=i(5863),Ce=i(815),Se=i(751);class je extends Re{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"sunburst"}),Object.defineProperty(this,"_partitionLayout",{enumerable:!0,configurable:!0,writable:!0,value:Oe()}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>Le.p._new(this._root,{themeTags:p.mergeTags(this.slices.template.get("themeTags",[]),[this._tag,"hierarchy","node","shape"])},[this.slices.template])))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>Ce.x._new(this._root,{themeTags:p.mergeTags(this.labels.template.get("themeTags",[]),[this._tag])},[this.labels.template])))})}_afterNew(){super._afterNew(),this.nodesContainer.setAll({x:n.CI,y:n.CI}),this.setPrivateRaw("dx",0),this.setPrivateRaw("dr",0)}_prepareChildren(){super._prepareChildren(),(this.isPrivateDirty("dr")||this.isPrivateDirty("dx"))&&this._rootNode&&this._updateNodesScale(this._rootNode)}_updateVisuals(){if(this._rootNode){const e=this._partitionLayout;let t=Se.getArcBounds(0,0,this.get("startAngle",0),this.get("endAngle",360),1),i=this.innerWidth(),a=this.innerHeight();const r=i/(t.right-t.left),s=a/(t.bottom-t.top);let o=Math.min(r,s),l=p.relativeToValue(this.get("radius",n.AQ),o),h=p.relativeToValue(this.get("innerRadius",0),l);h<0&&(h=l+h),o=l-h,this.setPrivateRaw("innerRadius",h),this.setPrivateRaw("hierarchySize",o),e.size([o,o]),this.nodesContainer.setAll({dy:-l*(t.bottom+t.top)/2,dx:-l*(t.right+t.left)/2});const c=this.get("nodePadding");x.isNumber(c)&&e.padding(c),e(this._rootNode),this._updateNodes(this._rootNode)}}_updateNode(e){super._updateNode(e);const t=e.get("d3HierarchyNode");e.get("node").setAll({x:0,y:0});const i=this.get("animationDuration",0),a=this.get("animationEasing"),n=this.getPrivate("scaleX",1),r=this.getPrivate("scaleY",1),s=this.getPrivate("dr",0),o=this.getPrivate("dx",0),l=t.x0*n+o,h=t.x1*n+o,c=t.y0*r,u=t.y1*r,d=this.getPrivate("innerRadius"),g=this.getPrivate("hierarchySize",0),p=e.get("slice");if(p){const t=this.get("startAngle",-90),n=this.get("endAngle",270),r=t+l/g*(n-t),o=t+h/g*(n-t)-r;let f=d+c,m=d+u;f-=s,m-=s,m=Math.max(0,m),f=Math.max(0,f),p.animate({key:"radius",to:m,duration:i,easing:a}),p.animate({key:"innerRadius",to:f,duration:i,easing:a}),p.animate({key:"startAngle",to:r,duration:i,easing:a}),p.animate({key:"arc",to:o,duration:i,easing:a});const y=e.get("fill");p._setDefault("fill",y),p._setDefault("stroke",y)}}_updateNodesScale(e){const t=e.data.dataItem;if(t){const i=this.getPrivate("scaleX",1),a=this.getPrivate("scaleY",1),n=this.getPrivate("dr",0),r=this.getPrivate("dx",0),s=e.x0*i+r,o=e.x1*i+r,l=e.y0*a,h=e.y1*a,c=this.getPrivate("innerRadius"),u=this.getPrivate("hierarchySize",0),d=t.get("slice");if(d){const e=this.get("startAngle",-90),t=this.get("endAngle",270),i=e+s/u*(t-e),a=e+o/u*(t-e)-i;let r=c+l,g=c+h;r-=n,g-=n,g=Math.max(0,g),r=Math.max(0,r),d.setAll({radius:g,innerRadius:r,startAngle:i,arc:a})}const g=e.children;g&&b.each(g,(e=>{this._updateNodesScale(e)}))}}_makeNode(e,t){const i=t.children.moveValue(this.slices.make(),0);t.setPrivate("tooltipTarget",i),e.setRaw("slice",i),i._setDataItem(e),i.on("arc",(()=>{this._updateLabel(e)})),i.on("innerRadius",(()=>{this._updateLabel(e)})),i.on("radius",(()=>{this._updateLabel(e)}))}_updateLabel(e){const t=e.get("slice"),i=e.get("label");if(t&&i){let e=t.get("innerRadius",0),a=t.get("radius",0),n=t.get("startAngle",0),r=Math.abs(t.get("arc",0)),s=n+r/2,o=i.get("textType"),l=a-e,h=a*r*Se.RADIANS;0==e&&r>=360&&"radial"==o&&(a=1,s=0,l*=2,h=l),Math.round(r)>=360&&"radial"==o&&(s=0),"circular"==o&&(l=r*Se.RADIANS*(e+(a-e)/2)-10),i.setAll({labelAngle:s}),i.setPrivate("radius",a),i.setPrivate("innerRadius",e),i.setAll({maxHeight:h,maxWidth:l})}}_zoom(e){let t=0,i=0,a=this.getPrivate("hierarchySize",0);const n=e.get("d3HierarchyNode");let r=this.get("upDepth",0),s=this.get("topDepth",0),o=n.depth,l=this.getPrivate("maxDepth",1),h=this._currentDownDepth;null==h&&(h=this.get("downDepth",1));const c=a/(l+1);o<s&&(o=s),o-r<0&&(r=o),t=n.x0,i=n.x1;let u=h+r+1;u>l-s+1&&(u=l-s+1);let d=a/(i-t),g=a/(c*u),p=Math.max(o-r,s)*c*g;const f=this.get("animationEasing");let m=this.get("animationDuration",0);this.inited||(m=0);let y=-t*d;this.animatePrivate({key:"scaleX",to:d,duration:m,easing:f}),this.animatePrivate({key:"scaleY",to:g,duration:m,easing:f}),this.animatePrivate({key:"dr",to:p,duration:m,easing:f}),this.animatePrivate({key:"dx",to:y,duration:m,easing:f})}_handleSingle(e){const t=e.get("parent");if(t){const i=t.get("children");i&&b.each(i,(t=>{t!=e&&(this.disableDataItem(t),t.get("node").hide())})),this._handleSingle(t)}}_positionBullet(e){const t=e.get("sprite");if(t){const i=t.dataItem,a=e.get("locationX",.5),n=e.get("locationY",.5),r=i.get("slice"),s=r.get("arc",0),o=r.get("startAngle",0)+r.get("arc",0)*a,l=r.get("innerRadius",0),h=l+(r.get("radius",0)-l)*n;let c=Se.cos(o)*h,u=Se.sin(o)*h;360===Se.round(s,5)&&0===Se.round(l,2)&&(c=0,u=0),t.set("x",c),t.set("y",u)}}_makeBullet(e,t,i){const a=super._makeBullet(e,t,i);if(a){const t=a.get("sprite"),i=e.get("slice");return t&&i&&(i.on("arc",(()=>{this._positionBullet(a)})),i.on("radius",(()=>{this._positionBullet(a)}))),a}}}function Be(e,t){return e.parent===t.parent?1:2}function He(e){var t=e.children;return t?t[0]:e.t}function Me(e){var t=e.children;return t?t[t.length-1]:e.t}function ze(e,t,i){var a=i/(t.i-e.i);t.c-=a,t.s+=i,e.c+=a,t.z+=i,t.m+=i}function We(e,t,i){return e.a.parent===t.parent?e.a:i}function Ve(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Ye(){var e=Be,t=1,i=1,a=null;function n(n){var l=function(e){for(var t,i,a,n,r,s=new Ve(e,0),o=[s];t=o.pop();)if(a=t._.children)for(t.children=new Array(r=a.length),n=r-1;n>=0;--n)o.push(i=t.children[n]=new Ve(a[n],n)),i.parent=t;return(s.parent=new Ve(null,0)).children=[s],s}(n);if(l.eachAfter(r),l.parent.m=-l.z,l.eachBefore(s),a)n.eachBefore(o);else{var h=n,c=n,u=n;n.eachBefore((function(e){e.x<h.x&&(h=e),e.x>c.x&&(c=e),e.depth>u.depth&&(u=e)}));var d=h===c?1:e(h,c)/2,g=d-h.x,p=t/(c.x+d+g),f=i/(u.depth||1);n.eachBefore((function(e){e.x=(e.x+g)*p,e.y=e.depth*f}))}return n}function r(t){var i=t.children,a=t.parent.children,n=t.i?a[t.i-1]:null;if(i){!function(e){for(var t,i=0,a=0,n=e.children,r=n.length;--r>=0;)(t=n[r]).z+=i,t.m+=i,i+=t.s+(a+=t.c)}(t);var r=(i[0].z+i[i.length-1].z)/2;n?(t.z=n.z+e(t._,n._),t.m=t.z-r):t.z=r}else n&&(t.z=n.z+e(t._,n._));t.parent.A=function(t,i,a){if(i){for(var n,r=t,s=t,o=i,l=r.parent.children[0],h=r.m,c=s.m,u=o.m,d=l.m;o=Me(o),r=He(r),o&&r;)l=He(l),(s=Me(s)).a=t,(n=o.z+u-r.z-h+e(o._,r._))>0&&(ze(We(o,t,a),t,n),h+=n,c+=n),u+=o.m,h+=r.m,d+=l.m,c+=s.m;o&&!Me(s)&&(s.t=o,s.m+=u-c),r&&!He(l)&&(l.t=r,l.m+=h-d,a=t)}return a}(t,n,t.parent.A||a[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function o(e){e.x*=t,e.y=e.depth*i}return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(e){return arguments.length?(a=!1,t=+e[0],i=+e[1],n):a?null:[t,i]},n.nodeSize=function(e){return arguments.length?(a=!0,t=+e[0],i=+e[1],n):a?[t,i]:null},n}Object.defineProperty(je,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sunburst"}),Object.defineProperty(je,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Re.classNames.concat([je.className])}),Ve.prototype=Object.create(A.prototype);class Fe extends S{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"tree"}),Object.defineProperty(this,"_hierarchyLayout",{enumerable:!0,configurable:!0,writable:!0,value:Ye()}),Object.defineProperty(this,"_packData",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_prepareChildren(){super._prepareChildren(),(this.isDirty("orientation")||this.isDirty("inversed"))&&this._updateVisuals()}_updateVisuals(){if(this._rootNode){const e=this._hierarchyLayout;"vertical"==this.get("orientation")?e.size([this.innerWidth(),this.innerHeight()]):e.size([this.innerHeight(),this.innerWidth()]),e(this._rootNode)}super._updateVisuals()}_getPoint(e){const t=this.get("inversed");return"vertical"==this.get("orientation")?t?{x:e.x,y:this.innerHeight()-e.y}:{x:e.x,y:e.y}:t?{x:this.innerWidth()-e.y,y:e.x}:{x:e.y,y:e.x}}}function Xe(e,t,i,a,n){for(var r,s=e.children,o=-1,l=s.length,h=e.value&&(n-i)/e.value;++o<l;)(r=s[o]).x0=t,r.x1=a,r.y0=i,r.y1=i+=r.value*h}Object.defineProperty(Fe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tree"}),Object.defineProperty(Fe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:S.classNames.concat([Fe.className])});var Ee=function e(t){function i(e,i,a,n,r){!function(e,t,i,a,n,r){for(var s,o,l,h,c,u,d,g,p,f,m,y=[],v=t.children,_=0,b=0,x=v.length,w=t.value;_<x;){l=n-i,h=r-a;do{c=v[b++].value}while(!c&&b<x);for(u=d=c,m=c*c*(f=Math.max(h/l,l/h)/(w*e)),p=Math.max(d/m,m/u);b<x;++b){if(c+=o=v[b].value,o<u&&(u=o),o>d&&(d=o),m=c*c*f,(g=Math.max(d/m,m/u))>p){c-=o;break}p=g}y.push(s={value:c,dice:l<h,children:v.slice(_,b)}),s.dice?Te(s,i,a,n,w?a+=h*c/w:r):Xe(s,i,a,w?i+=l*c/w:n,r),w-=c,_=b}}(t,e,i,a,n,r)}return i.ratio=function(t){return e((t=+t)>1?t:1)},i}((1+Math.sqrt(5))/2);function qe(){var e=Ee,t=!1,i=1,a=1,n=[0],r=oe,s=oe,o=oe,l=oe,h=oe;function c(e){return e.x0=e.y0=0,e.x1=i,e.y1=a,e.eachBefore(u),n=[0],t&&e.eachBefore(Ae),e}function u(t){var i=n[t.depth],a=t.x0+i,c=t.y0+i,u=t.x1-i,d=t.y1-i;u<a&&(a=u=(a+u)/2),d<c&&(c=d=(c+d)/2),t.x0=a,t.y0=c,t.x1=u,t.y1=d,t.children&&(i=n[t.depth+1]=r(t)/2,a+=h(t)-i,c+=s(t)-i,(u-=o(t)-i)<a&&(a=u=(a+u)/2),(d-=l(t)-i)<c&&(c=d=(c+d)/2),e(t,a,c,u,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(i=+e[0],a=+e[1],c):[i,a]},c.tile=function(t){return arguments.length?(e=se(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(r="function"==typeof e?e:le(+e),c):r},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(s="function"==typeof e?e:le(+e),c):s},c.paddingRight=function(e){return arguments.length?(o="function"==typeof e?e:le(+e),c):o},c.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:le(+e),c):l},c.paddingLeft=function(e){return arguments.length?(h="function"==typeof e?e:le(+e),c):h},c}function Qe(e,t,i,a,n){var r,s,o=e.children,l=o.length,h=new Array(l+1);for(h[0]=s=r=0;r<l;++r)h[r+1]=s+=o[r].value;!function e(t,i,a,n,r,s,l){if(t>=i-1){var c=o[t];return c.x0=n,c.y0=r,c.x1=s,void(c.y1=l)}for(var u=h[t],d=a/2+u,g=t+1,p=i-1;g<p;){var f=g+p>>>1;h[f]<d?g=f+1:p=f}d-h[g-1]<h[g]-d&&t+1<g&&--g;var m=h[g]-u,y=a-m;if(s-n>l-r){var v=a?(n*y+s*m)/a:s;e(t,g,m,n,r,v,l),e(g,i,y,v,r,s,l)}else{var _=a?(r*y+l*m)/a:l;e(t,g,m,n,r,s,_),e(g,i,y,n,_,s,l)}}(0,l,e.value,t,i,a,n)}function Ke(e,t,i,a,n){(1&e.depth?Xe:Te)(e,t,i,a,n)}class Ue extends T{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"treemap"}),Object.defineProperty(this,"rectangleTemplate",{enumerable:!0,configurable:!0,writable:!0,value:d.YS.new({})}),Object.defineProperty(this,"_treemapLayout",{enumerable:!0,configurable:!0,writable:!0,value:qe().tile(Ee)}),Object.defineProperty(this,"rectangles",{enumerable:!0,configurable:!0,writable:!0,value:new g.o(d.YS.new({}),(()=>u.c._new(this._root,{themeTags:p.mergeTags(this.rectangles.template.get("themeTags",[]),[this._tag,"shape"])},[this.rectangles.template])))})}_afterNew(){super._afterNew(),this.setPrivate("scaleX",1),this.setPrivate("scaleY",1)}_prepareChildren(){if(super._prepareChildren(),this.isDirty("layoutAlgorithm")){let e;switch(this.get("layoutAlgorithm")){case"squarify":e=Ee;break;case"binary":e=Qe;break;case"slice":e=Xe;break;case"dice":e=Te;break;case"sliceDice":e=Ke}e&&(this._treemapLayout=qe().tile(e)),this._rootNode&&this._updateNodes(this._rootNode)}(this.isDirty("nodePaddingRight")||this.isDirty("nodePaddingLeft")||this.isDirty("nodePaddingTop")||this.isDirty("nodePaddingBottom")||this.isDirty("nodePaddingOuter")||this.isDirty("nodePaddingInner"))&&this._rootNode&&this._updateNodes(this._rootNode),(this.isPrivateDirty("scaleX")||this.isPrivateDirty("scaleY"))&&this._rootNode&&this._updateNodesScale(this._rootNode)}_updateVisuals(){if(this._rootNode){const e=this._treemapLayout;e.size([this.innerWidth(),this.innerHeight()]);const t=this.get("nodePaddingLeft"),i=this.get("nodePaddingRight"),a=this.get("nodePaddingTop"),n=this.get("nodePaddingBottom"),r=this.get("nodePaddingInner"),s=this.get("nodePaddingOuter");x.isNumber(t)&&e.paddingLeft(t),x.isNumber(i)&&e.paddingRight(i),x.isNumber(a)&&e.paddingTop(a),x.isNumber(n)&&e.paddingBottom(n),x.isNumber(r)&&e.paddingInner(r),x.isNumber(s)&&e.paddingOuter(s),e(this._rootNode),this._updateNodes(this._rootNode)}}_updateNode(e){super._updateNode(e);const t=e.get("node"),i=e.get("rectangle"),a=e.get("d3HierarchyNode"),n=this.getPrivate("scaleX",1),r=this.getPrivate("scaleY",1),s=a.x0*n,o=a.x1*n,l=a.y0*r,h=o-s,c=a.y1*r-l,u=this.get("animationDuration",0),d=this.get("animationEasing");if(t.animate({key:"x",to:s,duration:u,easing:d}),t.animate({key:"y",to:l,duration:u,easing:d}),t.animate({key:"width",to:h,duration:u,easing:d}),t.animate({key:"height",to:c,duration:u,easing:d}),i){const t=e.get("fill");i.animate({key:"width",to:h,duration:u,easing:d}),i.animate({key:"height",to:c,duration:u,easing:d}),i._setDefault("fill",t),i._setDefault("stroke",t)}}_updateNodesScale(e){const t=e.data.dataItem;if(t){const i=t.get("node"),a=t.get("rectangle"),n=this.getPrivate("scaleX",1),r=this.getPrivate("scaleY",1),s=e.x0*n,o=e.x1*n,l=e.y0*r,h=o-s,c=e.y1*r-l;i.setAll({x:s,y:l,width:h,height:c}),a.setAll({width:h,height:c});const u=e.children;u&&b.each(u,(e=>{this._updateNodesScale(e)}))}}makeNode(e){const t=super.makeNode(e),i=t.children.moveValue(this.rectangles.make(),0);t.setPrivate("tooltipTarget",i),e.setRaw("rectangle",i);const a=e.get("label");return i.on("width",(()=>{a.setPrivate("maxWidth",i.width())})),i.on("height",(()=>{a.setPrivate("maxHeight",i.height())})),t}_zoom(e){if(this.width()>0&&this.height()>0){const t=e.get("d3HierarchyNode"),i=this.get("nodePaddingOuter",0);let a=t.x0+i,n=t.x1-i,r=t.y0+i,s=t.y1-i,o=(this.innerWidth()-2*i)/(n-a),l=(this.innerHeight()-2*i)/(s-r);const h=this.get("animationEasing"),c=this.get("animationDuration",0);this.animatePrivate({key:"scaleX",to:o,duration:c,easing:h}),this.animatePrivate({key:"scaleY",to:l,duration:c,easing:h}),this.nodesContainer.animate({key:"x",to:i-a*o,duration:c,easing:h}),this.nodesContainer.animate({key:"y",to:i-r*l,duration:c,easing:h})}}}Object.defineProperty(Ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Treemap"}),Object.defineProperty(Ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:T.classNames.concat([Ue.className])})},1484:function(e,t,i){i.r(t),i.d(t,{am5hierarchy:function(){return a}});const a=i(8613)}},function(e){var t=(1484,e(e.s=1484)),i=window;for(var a in t)i[a]=t[a];t.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})}]);
//# sourceMappingURL=hierarchy.js.map